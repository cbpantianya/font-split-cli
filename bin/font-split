#!/usr/bin/env node
'use strict';

const config = require('../src/config');
const argsConfig = config.argsDecoder();
const cfg = config.configDecoder(argsConfig.configFile);

const css = require('../src/css');
const fonts = require('../src/fonts');

if (cfg.template.type === 'remote') {
    css.templateCSSFetch(cfg.template.path).then((res) => {
        let unicodes = css.unicodeDecoder(res);
        let cmap = fonts.cmap(cfg['target-font'].path);
        let support_unicodes = fonts.match(unicodes, cmap);
        fonts.generateTTF(
            support_unicodes,
            cfg['target-font'].path,
            cfg['font-style']['family'],
            cfg['font-style']['weight'],
            cfg['font-style']['style'],
            cfg['font-style']['display']
        );
    });
} else if (cfg.template.type === 'local') {
    console.log('local will support later');
}
